<a href="/dashboard">&larr; Back</a>
<div class="admin-title">
    <h2>Add New Post</h2>
</div>

<form action="/add-post" method="POST" enctype="multipart/form-data" onsubmit="return validateForm();">
    <label for="title"><b>Title</b></label>
    <input type="text" placeholder="Post Title" name="title" required>

    <label for="author"><b>Author</b></label>
    <input type="text" placeholder="Author Name" name="author" required>

    <label for="headerImage"><b>Header Image</b></label>
    <input type="file" name="headerImage" required>

    <label for="body"><b>Content</b></label>
    <textarea name="body" id="body"></textarea> <!-- TinyMCE will replace this -->

    <label for="categories"><b>Categories</b></label>
    <p><b>Choose Promotions:</b></p>
    <div>
        <label><input type="checkbox" name="categories" value="UFC" /> UFC</label>
        <label><input type="checkbox" name="categories" value="Bellator" /> Bellator</label>
        <label><input type="checkbox" name="categories" value="ONE Championship" /> ONE Championship</label>
        <label><input type="checkbox" name="categories" value="PFL" /> PFL</label>
    </div>

    <p><b>Choose Combat Sports:</b></p>
    <div>
        <label><input type="checkbox" name="categories" value="MMA" /> MMA</label>
        <label><input type="checkbox" name="categories" value="Boxing" /> Boxing</label>
        <label><input type="checkbox" name="categories" value="Kickboxing" /> Kickboxing</label>
        <label><input type="checkbox" name="categories" value="Muay Thai" /> Muay Thai</label>
        <label><input type="checkbox" name="categories" value="Wrestling" /> Wrestling</label>
        <label><input type="checkbox" name="categories" value="Jiu-Jitsu" /> Jiu-Jitsu</label>
    </div>

    <input type="submit" value="Add" class="btn">
</form>

<script src="https://cdn.tiny.cloud/1/5zm60qesc6jws996dbi74dh260hjywix02k6ofi6mpgmm85d/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
<script>
    // Initialize TinyMCE
    document.addEventListener("DOMContentLoaded", function () {
        tinymce.init({
            selector: 'textarea[name="body"]', // Target the textarea for TinyMCE
            plugins: 'image link lists table code', // Add the plugins you want
            toolbar: 'undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | outdent indent | link image | code',
            menubar: false,
            height: 300, // Adjust the editor height
            setup: function (editor) {
                editor.on('change', function () {
                    editor.save(); // Update the textarea with the editor content
                });
            }
        });
    });

    // Form validation function
    function validateForm() {
        const bodyContent = tinymce.get('body').getContent();
        if (!bodyContent.trim()) {
            alert('Content is required.');
            return false; // Prevent form submission
        }
        return true; // Allow form submission
    }
</script>
